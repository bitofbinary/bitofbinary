{% import "macros/date.html" as date_macros -%}
{% import "macros/head.html" as head_macros -%}
{% import "macros/menu.html" as menu_macros -%}
{% import "macros/post.html" as post_macros -%}

<!DOCTYPE html>
<html lang="{%- if config.default_language -%}{{ config.default_language }}{%- else -%}en{%- endif -%}">

<head>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QG595WTNMF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QG595WTNMF');
    </script>

    <title>{%- block title %}{{ config.title }}{% endblock title -%}</title>
    {{ head_macros::head(config=config) }}

    {%- if config.generate_rss %}
        <link rel="alternate" type="application/rss+xml" title="RSS" href="{{ get_url(path="rss.xml") | safe }}">
    {% endif -%}

    {%- if config.extra.favicon %}
        <link rel="shortcut icon" type="{{ config.extra.favicon_mimetype | default(value="image/x-icon") }}" href="{{ config.extra.favicon | safe }}">
    {% endif -%}

    {%- block extra_head %}
    {% endblock extra_head -%}
</head>

<body class="">
<div class="container">
    {% block header %}
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                {%- if config.logo_home_link %}
                    {% set logo_link = config.logo_home_link %}
                {% else %}
                    {% set logo_link = config.base_url %}
                {% endif -%}
                <a href="{{ logo_link | safe }}" style="text-decoration: none;">
                    <div class="logo">
                      {% block logo_content %}
                        {%- if config.extra.logo_text %}
                            {{ config.extra.logo_text }}
                        {% else %}
                            Terminimal theme
                        {% endif -%}
                        {% endblock logo_content %}
                    </div>
                </a>
            </div>
        </div>

        {% block header_menu %}
        {{ menu_macros::menu(config=config, current_path=current_path) }}
        {% endblock header_menu %}
    </header>
    {% endblock header %}

    <div class="content">
        {% block content %}
        <div class="posts">
            <div class="intro">
                <p>
                Hi! I'm Deepak üôè
                </p>
                This is my online space where I collect and reflect on an array of topics. Books, Technology, and life in general.
                <p>
                    This site is ogranized into two major areas. One is a <a href="/archive">stream</a> and the other is the ü™¥<a href="/garden">garden</a>. 
                </p>
                <p>
                    Stream has date relevant content. You can think of the stream as a tradidional blog. It is a blog, I have just given it a fancy schmancy name. 
                </p>
                <p>
                    The garden is a collection of notes which are frequently updated. It is organised into topics and sub-topics. My objective here is to create a knowledge source I can go to when I need to look up something.
                </p>
                <p>I also use <a href="/categories">categories</a> and <a href="/tags">tags</a> taxonomy for all the content.</p>
                <p>
                To know more about me, you can visit my <a href="/about">About</a> page.
                </p>

                <p>I also maintain a list of <a href="/sites-i-like">sites I like</a></p>
                <figure style="width: 100%;">
                    <blockquote>
                        Do I contradict myself?<br/>
                        Very well then I contradict myself,<br/>
                        (I am large, I contain multitudes.)
                    </blockquote>
                    <figcaption>-Walt Whitman, <cite>Leaves of Grass</cite></figcaption>
                </figure>
            </div>

            <hr/>
            <div style="margin-bottom:3em;margin-top:3em;">
              <h3>Topics from garden</h3>

              {% set garden_section = get_section(path="garden/_index.md")%}
             
              {% for subsection in garden_section.subsections %} 
                {% set section = get_section(path=subsection) %}
                <a class="breadcrumb-path" href="{{ section.permalink }}">{{ section.title }}</a>
                {% for subsub_section in section.subsections %}
                  {% set subsubsection = get_section(path=subsub_section) %}
                    <a class="breadcrumb-path" href="{{ subsubsection.permalink }}">{{ subsubsection.title }}</a>
                {% endfor %}
              {% endfor %}
            </div>
            <hr/>

            <h4>Latest from stream</h4>
            
            {%- if paginator %}
                {%- set show_pages = paginator.pages -%}
            {% else %}
                {%- set show_pages = section.pages -%}
            {% endif -%}

            {%- for page in show_pages %}
                <div class="post on-list">
                    {{ post_macros::header(page=page) }}
                </div>
            {% endfor -%}
            <div class="pagination">
                <div class="pagination__buttons">
                {%- if paginator.previous %}
                    <span class="button previous">
                        <a href="{{ paginator.previous | safe }}">
                            <span class="button__icon">‚Üê</span>&nbsp;
                            <span class="button__text">Newer posts</span>
                        </a>
                    </span>
                {% endif -%}
                {%- if paginator.next %}
                    <span class="button next">
                        <a href="{{ paginator.next | safe }}">
                            <span class="button__text">Older posts</span>&nbsp;
                            <span class="button__icon">‚Üí</span>
                        </a>
                    </span>
                {% endif -%}
                </div>

                <div class="post">
                    <h3 class="">all categories</h3>
                    {% set categories = get_taxonomy(kind="categories") %}

                    <ul>
                        {% for cat in categories.items %}
                        <li class="tag-list">
                            <a href="{{ cat.permalink | safe }}">
                                {{ cat.name }} ({{ cat.pages | length }} post{{ cat.pages | length | pluralize }})
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="post">
                    <h3 class="">all tags</h3>
                    {% set tags = get_taxonomy(kind="tags") %}

                    <ul>
                        {% for tag in tags.items %}
                        <li class="tag-list">
                            <a href="{{ tag.permalink | safe }}">
                                {{ tag.name }} ({{ tag.pages | length }} post{{ tag.pages | length | pluralize }})
                            </a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>

            </div>
        </div>
        {% endblock content %}
    </div>

    <hr/>


    {% block footer %}
    <footer class="footer">
        <div class="footer__inner">
            {%- if config.extra.copyright_html %}
                <div class="copyright copyright--user">{{ config.extra.copyright_html | safe }}</div>
            {% else %}
                <div class="copyright">
                    {%- if config.extra.author %}
                        <span>¬© {{ date_macros::now_year() }} {{ config.extra.author }}</span>
                    {% else %}
                        <span>¬© {{ date_macros::now_year() }} Powered by <a href="https://www.getzola.org/">Zola</a></span>
                    {% endif -%}

                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            {% endif -%}
        </div>
    </footer>
    {% endblock footer %}

</div>
</body>

</html>
